#!/bin/bash

#**********************************************************************************
# User configurable part
DISK=/dev/sda
KEYMAP="hu"
#**********************************************************************************

mainmenu() {
    clear
    echo "\033[0;37m----------------------------------------------------------------------------------------------------"
    echo "\033[0;37m Arch linux setup script"
    echo "\033[0;37m----------------------------------------------------------------------------------------------------"
}
read -n 1 -r -p "continue? [y/n]" choice
choice=${choice,,} #to lovercase
if ![[ $choice =~ (yes|y) ]]; then
    exit 0
fi

#localization, change for your language
loadkeys $KEYMAP
/etc/locale.conf >> LANG=en_US.UTF-8
/etc/vconsole.conf >> KEYMAP=$KEYMAP

timedatectl set-ntp true

# partitioning
# (sda)
(
    echo n; echo p; echo 1; echo ""; echo +2G; # creating swap
    echo n; echo p; echo 2; echo ""; echo "";  # creating main filesystem

    echo t; echo 1; echo 19; # (TODO) this needs to be swap, may change
    
    echo w
) | fdisk /dev/sda
mkswap "${DISK}1"
swapon "${DISK}1"

mkfs.ext4 "${DISK}2"
mount "${DISK}2" /mnt

arch-chroot /mnt << "EOT"



EOT